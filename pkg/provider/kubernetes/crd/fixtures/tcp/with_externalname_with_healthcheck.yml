apiVersion: traefik.io/v1alpha1
kind: IngressRouteTCP
metadata:
  name: test.route
  namespace: default

spec:
  entryPoints:
    - foo

  routes:
  - match: HostSNI(`foo.com`)
    services:
    - name: external.service.with.port.tcp
      port: 80
      healthCheck:
        port: 80
        interval: 10s
        timeout: 5s
        send: "PING\r\n"
        expect: "PONG\r\n"
      passiveHealthCheck:
        failureWindow: 10s
        maxFailedAttempts: 3